{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-5 text-center">
            <div class="card shadow-lg border-0">
                <div class="card-body p-5">
                    <div class="mb-4">
                        <i class="fas fa-paper-plane text-success fa-4x"></i>
                    </div>
                    <h2 class="fw-bold">Check your inbox</h2>
                    <p class="text-muted mt-3">
                        We've emailed you instructions for setting your password, if an account exists with the email you entered. You should receive them shortly.
                    </p>
                    <p class="small text-muted">
                        If you don't see the email, please check your spam folder.
                    </p>
                    <div class="d-grid gap-2 mt-4">
                        <a href="{% url 'login' %}" class="btn btn-outline-primary">Return to Login</a>
                    </div>
                    <div class="mt-4">
                        <p class="small text-muted mb-2">Didn't receive the email?</p>
                        <form method="post" action="{% url 'accounts:password_reset' %}" id="resendForm">
                            {% csrf_token %}
                            <input type="hidden" name="email" value="{{ user_email }}">
                            
                            <button type="submit" id="resendBtn" class="btn btn-sm btn-link text-primary-custom fw-bold p-0" disabled>
                                Resend Email <span id="timer">(60s)</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    /* Hide dashboard sidebar and topbar for authentication pages */
    #sidebar, .top-navbar, #sidebar-overlay { display: none !important; }
    #main-wrapper { margin-left: 0 !important; width: 100% !important; background: #f9fafb; }
    .content-area { padding: 0 !important; }

    /* Centering Container */
    .auth-wrapper {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    /* TaskFlow Card Style */
    .auth-card {
        border-radius: 16px;
        border: none;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        background: #ffffff;
    }

    /* Branding Colors */
    .text-primary-custom { color: #6366f1; }
    .btn-primary-custom { 
        background-color: #6366f1; 
        border: none; 
        color: white;
        padding: 12px;
        font-weight: 600;
        transition: 0.3s;
    }
    .btn-primary-custom:hover { background-color: #4f46e5; transform: translateY(-1px); }
</style>
<script>
    let timeLeft = 60;
    const timerElem = document.getElementById('timer');
    const resendBtn = document.getElementById('resendBtn');

    const countdown = setInterval(() => {
        timeLeft--;
        if (timeLeft <= 0) {
            clearInterval(countdown);
            timerElem.innerText = "";
            resendBtn.disabled = false;
        } else {
            timerElem.innerText = `(${timeLeft}s)`;
        }
    }, 1000);
</script>
{% endblock %}